@model cmcookies.Models.ViewModels.Account.LoginViewModel

@{
    ViewData["Title"] = "Login";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>@ViewData["Title"] - Cam Cookies</title>
    <link rel="stylesheet" href="~/css/site.css"/>
    <link rel="stylesheet" href="~/css/auth.css"/>
</head>
<body>
<div class="auth-wrapper">
    <div class="auth-container">
        <!-- LADO IZQUIERDO - HEADER CON GRADIENTE NARANJA -->
        <div class="auth-header">
            <div class="auth-header-content">
                <img src="~/images/logo.png" alt="Cam Cookies Logo"/>
                <h2>¡Bienvenido de vuelta!</h2>
                <p>Ingresa para continuar a Cam Cookies („• ֊ •„)</p>
            </div>
        </div>

        <!-- LADO DERECHO - FORMULARIO -->
        <div class="auth-body">
            <!-- Mostrar errores de validación generales -->
            @if (!ViewData.ModelState.IsValid)
            {
                <div asp-validation-summary="All" class="validation-summary-errors"></div>
            }

            <form asp-action="Login" asp-route-returnUrl="@ViewData["ReturnUrl"]" method="post">
                <!--Si un usuario no loggeado intenta ir a /Admin/Dashboard por ejemplo, ASP.NET lo redirige a Loggin y el GET de loggin guarda que quiso ir hacia Dashboard. Este se loggea, y el POST lee el returnURL y lo redirige-->
                <!-- Email -->
                <div class="form-group">
                    <label asp-for="Email" class="form-label">Email</label>
                    <input asp-for="Email" class="form-control" placeholder="your@email.com" autofocus/>
                    <!--cuando la pag carga el cursor ya esta sobre el campo del email, para que el usuario pueda empezar a escribir sin hacerle click-->
                    <span asp-validation-for="Email" class="invalid-feedback"></span>
                </div>

                <!-- Password -->
                <div class="form-group">
                    <label asp-for="Password" class="form-label">Password</label>
                    <input asp-for="Password" class="form-control" placeholder="Enter your password"/>
                    <span asp-validation-for="Password" class="invalid-feedback"></span>
                </div>

                <!-- Remember Me -->
                <!-- 
                El tag helper `asp-for` genera un input oculto junto al checkbox.
                Esto asegura que siempre se envíe un valor ('true' si está marcado, 'false' si no),
                solucionando el comportamiento estándar de HTML donde los checkboxes desmarcados no envían nada.
                -->
                <div class="form-check">
                    <input asp-for="RememberMe" class="form-check-input"/>
                    <label asp-for="RememberMe" class="form-check-label">
                        Remember me
                    </label>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary btn-auth">Sign In</button>

                <!-- FOOTER dentro del formulario -->
                <div class="auth-footer">
                    <p>¿No tienes una cuenta? <a asp-action="Register" class="auth-link">Crear una cuenta</a></p>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Scripts de validación -->
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
</body>
</html>